<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="oss.mapper.PortalManageMapper">
	<!-- 动态列表 -->
<select id="ListDyna" resultType="oss.bean.Dynamics" parameterType="oss.bean.Condition">
		select * from dynamics where 1 = 1
		<if test="startDate != null and endDate != null and startDate !='' and endDate !=''">
			and dynamicTime between #{startDate} and #{endDate}
		</if>
		<if test="title != null and title !='' ">
			and  dynamicTitle like concat(concat('%',#{title}),'%')
		</if>
		
	</select>
	
	<!-- 	删除动态 -->
	<delete id="deleteDynaById" parameterType="java.util.List">
		delete from Dynamics where dynamicId in
		<foreach collection="list" item="i" open="(" close=")" separator=",">
			#{i.dynamicId}
		</foreach>
	</delete>
	
		<!-- 修改动态 -->
	<update id="updateDynaById" parameterType="oss.bean.Dynamics">
		update Dynamics set
		dynamicTitle=#{dynamicTitle},dynamicContext=#{dynamicContext},dynamicTime=#{dynamicTime} where dynamicId=#{dynamicId}
	</update>
	
	<!-- 	增加动态 -->
		<insert id="AddDyna" parameterType="oss.bean.Dynamics">
		<selectKey keyProperty="dynamicId" order="BEFORE" resultType="long">
			select DYNAMICSEQ.nextval from dual
		</selectKey>
		insert into Dynamics(dynamicId,dynamicTitle,dynamicContext,dynamicTime)
		values(#{dynamicId},#{dynamicTitle},#{dynamicContext},#{dynamicTime})	
	</insert>
	
</mapper>
	