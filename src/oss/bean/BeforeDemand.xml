<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="oss.mapper.PortalMapper">

	<!-- 华清修改：前端需求列表查询 -->
	<select id="beforeDemandsList" parameterType="oss.bean.Condition" resultType="oss.bean.Demands">
		select * from demands where  1=1
		
		<if test="startDate != null and endDate != null and startDate != '' and endDate != ''">
			and demandstatusid = 2 and releaseTime between '${startDate} 00:00:00' and '${endDate} 23:59:59'
		</if>
		
		<if test="beWorksPrice != null and endWorksPrice != null and beWorksPrice != '' and endWorksPrice != ''">
			and demandstatusid = 2 and demandPrice between #{beWorksPrice} and #{endWorksPrice}
		</if>

		<if test="title != null and title != ''">
			and demandstatusid = 2 and demandTitle like '%${title}%'
		</if>
		
		<if test="ascenDing ==1">
			 order by releaseTime asc
		</if>
		<if test="ascenDing ==11">
			 order by releaseTime desc
		</if>
		
		<if test="ascenDing ==4">
			 order by demandPrice asc
		</if>
		<if test="ascenDing ==44">
			 order by demandPrice desc
		</if>
	</select>
	
   <select id="demandDetailsList" resultType="oss.bean.Demands" parameterType="oss.bean.Demands">
		
		select * from demands where demandID=#{demandID}
	</select>
	
	
</mapper>
